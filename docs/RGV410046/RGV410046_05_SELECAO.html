<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.223">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Aulas - 5. Seleção e filtragem</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../RGV410046/RGV410046_06_MUTACAO.html" rel="next">
<link href="../RGV410046/RGV410046_04_MANIPULACAO.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean"
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>


<link rel="stylesheet" href="../style.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Aulas</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../00_about.html"><i class="bi bi-fa fa-home" role="img">
</i> 
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../FIT5306/FIT5306_00_ABOUT.html">
 <span class="menu-text">Bioestatística</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../RGV410046/RGV410046_00_ABOUT.html" aria-current="page">
 <span class="menu-text">Introdução ao R</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.researchgate.net/profile/Tiago_Olivoto"><i class="bi bi-fab fa-researchgate fa" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/TiagoOlivoto/classes"><i class="bi bi-bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/tolivoto"><i class="bi bi-bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.mendeley.com/profiles/tiago-olivoto/"><i class="bi bi-fab fa-mendeley fa" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">5. Seleção e filtragem</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RGV410046/RGV410046_00_ABOUT.html" class="sidebar-item-text sidebar-link">RGV410046 - Introdução à linguagem R de programação</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RGV410046/RGV410046_01_INTRO.html" class="sidebar-item-text sidebar-link">1. O software R</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RGV410046/RGV410046_02_PROGRAMACAO.html" class="sidebar-item-text sidebar-link">2. Introdução à programação R</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RGV410046/RGV410046_03_DADOS.html" class="sidebar-item-text sidebar-link">3. Dados</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RGV410046/RGV410046_04_MANIPULACAO.html" class="sidebar-item-text sidebar-link">4. Manipulação de Dados</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RGV410046/RGV410046_05_SELECAO.html" class="sidebar-item-text sidebar-link active">5. Seleção e filtragem</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RGV410046/RGV410046_06_MUTACAO.html" class="sidebar-item-text sidebar-link">6. Mutação</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RGV410046/RGV410046_07_RESUMO.html" class="sidebar-item-text sidebar-link">7. Sintetização</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Nesta página</h2>
   
  <ul>
  <li><a href="#diretório" id="toc-diretório" class="nav-link active" data-scroll-target="#diretório">Diretório</a></li>
  <li><a href="#pacotes-e-dados" id="toc-pacotes-e-dados" class="nav-link" data-scroll-target="#pacotes-e-dados">Pacotes e dados</a></li>
  <li><a href="#introdução" id="toc-introdução" class="nav-link" data-scroll-target="#introdução">Introdução</a></li>
  <li><a href="#trabalhando-com-colunas" id="toc-trabalhando-com-colunas" class="nav-link" data-scroll-target="#trabalhando-com-colunas">Trabalhando com colunas</a>
  <ul>
  <li><a href="#selecionar-colunas" id="toc-selecionar-colunas" class="nav-link" data-scroll-target="#selecionar-colunas">Selecionar colunas</a>
  <ul class="collapse">
  <li><a href="#com-base-em-seus-nomes" id="toc-com-base-em-seus-nomes" class="nav-link" data-scroll-target="#com-base-em-seus-nomes">Com base em seus nomes</a></li>
  <li><a href="#com-base-na-classe" id="toc-com-base-na-classe" class="nav-link" data-scroll-target="#com-base-na-classe">Com base na classe</a></li>
  <li><a href="#select-helpers" id="toc-select-helpers" class="nav-link" data-scroll-target="#select-helpers">Select helpers</a></li>
  </ul></li>
  <li><a href="#extrair-colunas" id="toc-extrair-colunas" class="nav-link" data-scroll-target="#extrair-colunas">Extrair colunas</a></li>
  <li><a href="#realocar-colunas" id="toc-realocar-colunas" class="nav-link" data-scroll-target="#realocar-colunas">Realocar colunas</a></li>
  </ul></li>
  <li><a href="#trabalhado-com-linhas" id="toc-trabalhado-com-linhas" class="nav-link" data-scroll-target="#trabalhado-com-linhas">Trabalhado com linhas</a>
  <ul>
  <li><a href="#selecionar-linhas-com-base-em-seus-valores" id="toc-selecionar-linhas-com-base-em-seus-valores" class="nav-link" data-scroll-target="#selecionar-linhas-com-base-em-seus-valores">Selecionar linhas com base em seus valores</a></li>
  <li><a href="#selecionar-linhas-com-base-em-sua-posição" id="toc-selecionar-linhas-com-base-em-sua-posição" class="nav-link" data-scroll-target="#selecionar-linhas-com-base-em-sua-posição">Selecionar linhas com base em sua posição</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#ordenar-linhas-com-base-em-seus-valores" id="toc-ordenar-linhas-com-base-em-seus-valores" class="nav-link" data-scroll-target="#ordenar-linhas-com-base-em-seus-valores">Ordenar linhas com base em seus valores</a></li>
  <li><a href="#outras-funções-úteis" id="toc-outras-funções-úteis" class="nav-link" data-scroll-target="#outras-funções-úteis">Outras funções úteis</a></li>
  </ul></li>
  <li><a href="#dplyr-vs-r-base" id="toc-dplyr-vs-r-base" class="nav-link" data-scroll-target="#dplyr-vs-r-base">dplyr vs R base</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/TiagoOlivoto/classes/edit/main/RGV410046/RGV410046_05_SELECAO.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/TiagoOlivoto/classes/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block">5. Seleção e filtragem</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="diretório" class="level1">
<h1>Diretório</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># meu computador (mudar de acordo)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"E:/Desktop/UFSC/aulas/classes/RGV410046/data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pacotes-e-dados" class="level1">
<h1>Pacotes e dados</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(metan)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="introdução" class="level1">
<h1>Introdução</h1>
<p>Após seus dados estarem carregados no ambiente R, eles provavelmente necessitarão de alguma manimulação antes de serem utilizados em uma determinada análise. Esta manipulação pode envolver operações como exclusão de colunas, ordenamento de linhas com base em valores, criação de covariáveis (que serão resultado de operações com uma ou mais variáveis existentes), dentre muitas outras possibilidades. Felizmente, o pacote <code>dplyr</code> permite que esta manimulação seja relativamente fácil, lógica (do ponto de vista de digitação de códigos) e rápida, pois ele integra a linguagem <code>C++</code> em suas funções.</p>
<p>O pacote <code>dplyr</code> é uma <em>gramática</em> de manipulação de dados. Nos rerferimos à <em>gramática</em> aqui porque ele fornece funções nomeadas como <em>verbos</em> simples, relacionados às tarefas mais comuns de manipulação de dados, para ajudá-lo a traduzir seus pensamentos em código. Este será o pacote utilizado para manipulação dos dados no decorrer deste material. De fato, a maioria dos dados em R podem ser manipulados utilizando os seguintes “verbos”.</p>
<ul>
<li><code>select()</code> e <code>rename()</code> para selecionar variáveis com base em seus nomes.</li>
<li><code>mutate()</code> e <code>transmute()</code> para adicionar novas variáveis que são funções de variáveis existentes.</li>
<li><code>arrange()</code> para reordenar as linhas.</li>
<li><code>filter()</code> para selecionar linhas com base em seus valores.</li>
<li><code>slice_*()</code> para selecionar linhas com base em sua posição.</li>
<li><code>summarise()</code> para resumir vários valores para um único valor.</li>
<li><code>group_by()</code> para agrupar dados com base em níveis de variáveis categóricas.</li>
<li><code>across()</code> para aplicar a mesma transformação a várias colunas.</li>
</ul>
<p>Anteriomente mencionamos que a manipulação dos dados com o pacote <strong>dplyr</strong> é lógica do ponto de vista da implementação do código. Isto só é possivel devido a utilização do operador <code>%&gt;%</code> (<em>forward-pipe operator</em>), importado do pacote <code>magrittr</code> (ou com o pipe <code>|&gt;</code> disponível do R vesão 4.1 ou superior). Basicamente, este operador capta o argumento resultante de uma função à sua esquerda e passa como <em>input</em> à função à sua direita. Considere as seguintes (e simples) operações. Crie um data frame com 100 linhas com as variáveis <em>x</em> e <em>y</em> contendo valores aleatórios. Adicione uma terceira variáveis (<em>z</em>) que será uma função da multiplicação de <em>x</em> e <em>y</em>, selecione apenas os valores de <em>z</em> menores que 10 e extraia a raiz quadrada destes valores. Finalmente, compute a média e armazene no object <code>mean_sqrt</code>.</p>
<ul>
<li>Criando o conjunto de dados</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="fu">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Utilizando as funções bases do R (código massivo)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>z <span class="ot">&lt;-</span> data<span class="sc">$</span>x <span class="sc">*</span> data<span class="sc">$</span>y</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">subset</span>(data, z <span class="sc">&lt;</span> <span class="dv">10</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[, <span class="dv">3</span>]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>sqr_dat <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(df<span class="sc">$</span>z)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>mean_sqrt <span class="ot">&lt;-</span> <span class="fu">mean</span>(sqr_dat)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>mean_sqrt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.977507</code></pre>
</div>
</div>
<ul>
<li>Utilizando as funções bases do R (código mais limpo, envelopando funções)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>z <span class="ot">&lt;-</span> data<span class="sc">$</span>x <span class="sc">*</span> data<span class="sc">$</span>y</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>mean_sqrt <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">sqrt</span>(<span class="fu">subset</span>(data, z <span class="sc">&lt;</span> <span class="dv">10</span>)<span class="sc">$</span>z))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>mean_sqrt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.977507</code></pre>
</div>
</div>
<ul>
<li>Utilizando o operdor <code>|&gt;</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>mean_sqrt <span class="ot">&lt;-</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">z =</span> x <span class="sc">*</span> y) <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(z <span class="sc">&lt;</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(z) <span class="sc">|&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>()</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>mean_sqrt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.977507</code></pre>
</div>
</div>
</section>
<section id="trabalhando-com-colunas" class="level1">
<h1>Trabalhando com colunas</h1>
<section id="selecionar-colunas" class="level2">
<h2 class="anchored" data-anchor-id="selecionar-colunas">Selecionar colunas</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://dplyr.tidyverse.org/"><img src="figs/select.png" class="img-fluid figure-img" alt="Fonte: https://dplyr.tidyverse.org/"></a></p>
</figure>
</div>
<p>A função <a href="https://dplyr.tidyverse.org/reference/select.html"><code>select()</code></a> do pacote <code>dplyr</code> pode ser usada para selecionar colunas de um conjunto de dados com base em seu nome (por exemplo, <code>a:f</code> seleciona todas as colunas de <code>a</code> à esquerda a <code>f</code> à direita). Você também pode usar funções de predicado como <code>is.numeric</code> para selecionar variáveis com base em suas propriedades. As seleções do Tidyverse implementam um dialeto R onde os operadores facilitam a seleção de variáveis:</p>
<ul>
<li><code>:</code> para selecionar um intervalo de variáveis consecutivas.</li>
<li><code>!</code> para tomar o complemento de um conjunto de variáveis.</li>
<li><code>&amp;</code> e <code>|</code> para selecionar a interseção ou a união de dois conjuntos de variáveis.</li>
<li><code>c()</code> para combinar seleções.</li>
</ul>
<section id="com-base-em-seus-nomes" class="level3">
<h3 class="anchored" data-anchor-id="com-base-em-seus-nomes">Com base em seus nomes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>maize <span class="ot">&lt;-</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">import</span>(<span class="st">"examples_data.xlsx"</span>,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">sheet =</span> <span class="st">"maize"</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">setclass =</span> <span class="st">"tbl"</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># para evitar uma saída longa</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> maize <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># lista de nomes</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(AMB, HIB, REP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  AMB   HIB   REP  
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 A1    H1    I    
2 A1    H1    I    
3 A1    H1    I    
4 A1    H1    I    
5 A1    H1    I    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sequência de nomes</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(AMB<span class="sc">:</span>REP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  AMB   HIB   REP  
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 A1    H1    I    
2 A1    H1    I    
3 A1    H1    I    
4 A1    H1    I    
5 A1    H1    I    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vector de posições</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  AMB   HIB   REP  
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 A1    H1    I    
2 A1    H1    I    
3 A1    H1    I    
4 A1    H1    I    
5 A1    H1    I    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># negar a seleção</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(AMB<span class="sc">:</span>REP))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
  APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
       &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1       2.45       2.39  16.9  52.1  228.  375.    NA
2       2.5        1.43  14.4  50.7  187.  437.   427
3       2.69       1.52  16.5  54.7  230.  464.   497
4       2.8        1.64  16.8  52.0  213.  408.   523
5       2.62       1.55  15.9  51.6  224.  406.   551</code></pre>
</div>
</div>
</section>
<section id="com-base-na-classe" class="level3">
<h3 class="anchored" data-anchor-id="com-base-na-classe">Com base na classe</h3>
<p>A função <code>where()</code> aplica uma função a todas as variáveis e seleciona aquelas para as quais a função retorna <code>TRUE</code>. Assim, podemos selecionar facilmente colunas com base em sua classe</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona variáveis numéricas</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
  APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
       &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1       2.45       2.39  16.9  52.1  228.  375.    NA
2       2.5        1.43  14.4  50.7  187.  437.   427
3       2.69       1.52  16.5  54.7  230.  464.   497
4       2.8        1.64  16.8  52.0  213.  408.   523
5       2.62       1.55  15.9  51.6  224.  406.   551</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~!</span><span class="fu">is.numeric</span>(.x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  AMB   HIB   REP  
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 A1    H1    I    
2 A1    H1    I    
3 A1    H1    I    
4 A1    H1    I    
5 A1    H1    I    </code></pre>
</div>
</div>
</section>
<section id="select-helpers" class="level3">
<h3 class="anchored" data-anchor-id="select-helpers">Select helpers</h3>
<p>Essas funções permitem selecionar variáveis com base em seus nomes.</p>
<ul>
<li><code>starts_with()</code>: começa com um prefixo</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"C"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
   CESP
  &lt;dbl&gt;
1  16.9
2  14.4
3  16.5
4  16.8
5  15.9</code></pre>
</div>
</div>
<ul>
<li><code>ends_with()</code>: termina com um prefixo</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"S"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
   DIES
  &lt;dbl&gt;
1  52.1
2  50.7
3  54.7
4  52.0
5  51.6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variáveis que começam com M e terminam com A</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"M"</span>) <span class="sc">&amp;</span> <span class="fu">ends_with</span>(<span class="st">"A"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
   MGRA
  &lt;dbl&gt;
1  228.
2  187.
3  230.
4  213.
5  224.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variáveis que começam com M ou terminam com A</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"M"</span>) <span class="sc">|</span> <span class="fu">ends_with</span>(<span class="st">"A"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
   MGRA   MMG  NGRA
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  228.  375.    NA
2  187.  437.   427
3  230.  464.   497
4  213.  408.   523
5  224.  406.   551</code></pre>
</div>
</div>
<ul>
<li><code>contains()</code>: contém uma string literal</li>
</ul>
<p>Se as variáveis no conjunto de dados tiverem um padrão com diferenças entre um grupo de variáveis, podemos usar o código a seguir para selecionar variáveis com um padrão.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"PLANT"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  APLA_PLANT AIES_PLANT
       &lt;dbl&gt;      &lt;dbl&gt;
1       2.45       2.39
2       2.5        1.43
3       2.69       1.52
4       2.8        1.64
5       2.62       1.55</code></pre>
</div>
</div>
<ul>
<li><code>matches()</code>: corresponde a uma expressão regular</li>
</ul>
<p>Seleções mais sofisticadas podem ser feitas usando <a href="https://tidyselect.r-lib.org/reference/select_helpers.html"><code>matches()</code></a>. Supondo que gostaríamos de selecionar as variáveis que começam com “A” e tem a segunda letra entre “A” e “M”, usaríamos algo como</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">"^A[A-M]"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  AMB   AIES_PLANT
  &lt;chr&gt;      &lt;dbl&gt;
1 A1          2.39
2 A1          1.43
3 A1          1.52
4 A1          1.64
5 A1          1.55</code></pre>
</div>
</div>
<ul>
<li><code>one_of()</code>: variáveis no vetor de caracteres.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"TESTE"</span>, <span class="st">"CESP"</span>, <span class="st">"NGRA"</span>, <span class="st">"NAO_TEM"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">one_of</span>(vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown columns: `TESTE`, `NAO_TEM`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
   CESP  NGRA
  &lt;dbl&gt; &lt;dbl&gt;
1  16.9    NA
2  14.4   427
3  16.5   497
4  16.8   523
5  15.9   551</code></pre>
</div>
</div>
<ul>
<li><code>everything()</code>: todas as variáveis.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
  AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I           2.45       2.39  16.9  52.1  228.  375.    NA
2 A1    H1    I           2.5        1.43  14.4  50.7  187.  437.   427
3 A1    H1    I           2.69       1.52  16.5  54.7  230.  464.   497
4 A1    H1    I           2.8        1.64  16.8  52.0  213.  408.   523
5 A1    H1    I           2.62       1.55  15.9  51.6  224.  406.   551</code></pre>
</div>
</div>
</section>
</section>
<section id="extrair-colunas" class="level2">
<h2 class="anchored" data-anchor-id="extrair-colunas">Extrair colunas</h2>
<p>No R base, para extrair colunas de um data frame usamos <code>$</code>. A função <a href="https://dplyr.tidyverse.org/reference/pull.html"><code>pull()</code></a> é semelhante a <code>$</code>, mas é mais fácil de ser utilizada com pipes. Para seleção, podemos especificar uma variável como:</p>
<ul>
<li>um nome de variável literal</li>
<li>um inteiro positivo, dando a posição contando a partir da esquerda</li>
<li>um inteiro negativo, dando a posição contando a partir da direita.</li>
<li>O padrão retorna a última coluna (supondo que seja a coluna que você criou mais recentemente).</li>
</ul>
<p>Note a diferença.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>MGRA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 228.3716 186.6627 230.3904 213.4960 223.6949</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># padrão é a última coluna</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">pull</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  NA 427 497 523 551</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar variável com base no nome</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">pull</span>(MGRA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 228.3716 186.6627 230.3904 213.4960 223.6949</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar variável com base na sua posição</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">pull</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.39 1.43 1.52 1.64 1.55</code></pre>
</div>
</div>
</section>
<section id="realocar-colunas" class="level2">
<h2 class="anchored" data-anchor-id="realocar-colunas">Realocar colunas</h2>
<p>Para reordenar colunas em um data frame, podemos utilizar a função <a href="https://dplyr.tidyverse.org/reference/relocate.html"><code>relocate()</code></a> do pacote <code>dplyr</code>. Ela altera as posições das colunas, usando a mesma sintaxe que <code>select()</code> para facilitar a movimentação de blocos de colunas de uma só vez.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">relocate</span>(.data, ..., <span class="at">.before =</span> <span class="cn">NULL</span>, <span class="at">.after =</span> <span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nesta função, as variáveis em … são movidas para antes de <code>.before</code> ou depois de <code>.after</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">relocate</span>(NGRA, <span class="at">.before =</span> APLA_PLANT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
  AMB   HIB   REP    NGRA APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I        NA       2.45       2.39  16.9  52.1  228.  375.
2 A1    H1    I       427       2.5        1.43  14.4  50.7  187.  437.
3 A1    H1    I       497       2.69       1.52  16.5  54.7  230.  464.
4 A1    H1    I       523       2.8        1.64  16.8  52.0  213.  408.
5 A1    H1    I       551       2.62       1.55  15.9  51.6  224.  406.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">relocate</span>(<span class="fu">contains</span>(<span class="st">"_PLANT"</span>), <span class="at">.after =</span> <span class="fu">last_col</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
  AMB   HIB   REP    CESP  DIES  MGRA   MMG  NGRA APLA_PLANT AIES_PLANT
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 A1    H1    I      16.9  52.1  228.  375.    NA       2.45       2.39
2 A1    H1    I      14.4  50.7  187.  437.   427       2.5        1.43
3 A1    H1    I      16.5  54.7  230.  464.   497       2.69       1.52
4 A1    H1    I      16.8  52.0  213.  408.   523       2.8        1.64
5 A1    H1    I      15.9  51.6  224.  406.   551       2.62       1.55</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">relocate</span>(<span class="fu">where</span>(is.numeric), <span class="at">.before =</span> <span class="fu">where</span>(is.character))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
  APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA AMB   HIB   REP  
       &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1       2.45       2.39  16.9  52.1  228.  375.    NA A1    H1    I    
2       2.5        1.43  14.4  50.7  187.  437.   427 A1    H1    I    
3       2.69       1.52  16.5  54.7  230.  464.   497 A1    H1    I    
4       2.8        1.64  16.8  52.0  213.  408.   523 A1    H1    I    
5       2.62       1.55  15.9  51.6  224.  406.   551 A1    H1    I    </code></pre>
</div>
</div>
</section>
</section>
<section id="trabalhado-com-linhas" class="level1">
<h1>Trabalhado com linhas</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://dplyr.tidyverse.org/"><img src="figs/filter.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Fonte: https://dplyr.tidyverse.org/</figcaption><p></p>
</figure>
</div>
<section id="selecionar-linhas-com-base-em-seus-valores" class="level2">
<h2 class="anchored" data-anchor-id="selecionar-linhas-com-base-em-seus-valores">Selecionar linhas com base em seus valores</h2>
<p>Utilizando a função <a href="https://dplyr.tidyverse.org/reference/filter.html"><code>filter()</code></a> é possivel filtrar as linhas de um conjunto de dados com base no valor de suas variáveis. No primeiro exemplo, selecionaremos as linhas onde o valor da variável MGRA é maior que 280.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(MGRA <span class="sc">&gt;</span> <span class="dv">280</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 10
  AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H6    I           2.92       1.64  18    56.0  289.  393.   734
2 A1    H10   I           2.92       1.61  20.3  55.4  283.  441.   641
3 A1    H13   II          2.47       1.28  15.3  53.0  291.  417.   698
4 A4    H10   I           2.65       1.47  14    50.3  287.  275.   493</code></pre>
</div>
</div>
<p>No segundo exemplo, selecionaremos apenas as linhas onde a MGRA é maior que 220 <strong>OU</strong> a APLA é menor que 1.3 <strong>OU</strong> o NGRA é maior que 820.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(MGRA <span class="sc">&gt;</span> <span class="dv">280</span> <span class="sc">|</span> APLA_PLANT <span class="sc">&lt;</span> <span class="fl">1.3</span> <span class="sc">|</span> NGRA <span class="sc">&gt;</span> <span class="dv">820</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 10
   AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H6    I           2.92       1.64  18    56.0 289.   393.   734
 2 A1    H10   I           2.92       1.61  20.3  55.4 283.   441.   641
 3 A1    H13   II          2.47       1.28  15.3  53.0 291.   417.   698
 4 A2    H8    II          1.03       0.69  10.8  44.8  94.8  277.   342
 5 A2    H10   III         1.09       0.92  15    47.6 166.   299.   555
 6 A2    H13   I           0          1.26  15.1  51.4 173.   375.   462
 7 A3    H2    III         0          1.25  17.8  51.6 196.   348.   562
 8 A3    H5    II          0          0.95  14.4  49.7 135.   213.   635
 9 A3    H10   I           1.04       0.71  14.8  45.5 112.   265.   423
10 A3    H11   I           1          0.65  14.5  43.6 120.   210.   571
11 A4    H8    I           2.65       1.67  18    50   277.   251.   903
12 A4    H8    I           2.95       1.7   18.6  52.9 249.   302.   824
13 A4    H10   I           2.65       1.47  14    50.3 287.   275.   493</code></pre>
</div>
</div>
<p>No último exemplo, selecionaremos apenas as linhas onde MGRA é maior que é maior que 220 <strong>E</strong> a APLA é menor que 2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(MGRA <span class="sc">&gt;</span> <span class="dv">220</span> <span class="sc">&amp;</span> APLA_PLANT <span class="sc">&lt;</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 10
  AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H6    II          1.97       1.63  17.1  54.7  230.  375.   614</code></pre>
</div>
</div>
<p>Isto é aproximadamente equivalente ao seguinte código R base.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>maize[maize<span class="sc">$</span>MGRA <span class="sc">&gt;</span> <span class="dv">220</span> <span class="sc">&amp;</span> maize<span class="sc">$</span>APLA_PLANT <span class="sc">&lt;</span> <span class="dv">2</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Você também pode usar <code>filter()</code> para remover grupos inteiros. Por exemplo, o código a seguir elimina todas as linhas que contém o híbrido “H1”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">filter</span>(HIB <span class="sc">!=</span> <span class="st">"H1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 720 × 10
   AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H2    I           2.45       1.24  17.7  54.7 255.   422.   604
 2 A1    H2    I           2.41       1.32  15    50.5 198.   369.   537
 3 A1    H2    I           2.62       1.16  10    47.5  94.5  380.   249
 4 A1    H2    I          NA          1.18  16.1  52.3 213.   331.   643
 5 A1    H2    I           2.65       1.21  16.6  53.2 228.   409.   558
 6 A1    H2    II          2.95       1.55  14.5  49.2 178.   258.   689
 7 A1    H2    II          2.95       1.39  15.5  54.7 233.   284.   818
 8 A1    H2    II          2.92       1.4   14    46.7 174.   288.   602
 9 A1    H2    II          2.86       1.34  16.1  55.3 273.   356.   767
10 A1    H2    II          2.84       1.35  15.5  51.6 204.   335.   607
# … with 710 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona somente os híbridos H1 e H2</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">filter</span>(HIB  <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">"H1"</span>, <span class="st">"H2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 120 × 10
   AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I           2.45       2.39  16.9  52.1 228.   375.    NA
 2 A1    H1    I           2.5        1.43  14.4  50.7 187.   437.   427
 3 A1    H1    I           2.69       1.52  16.5  54.7 230.   464.   497
 4 A1    H1    I           2.8        1.64  16.8  52.0 213.   408.   523
 5 A1    H1    I           2.62       1.55  15.9  51.6 224.   406.   551
 6 A1    H1    II          2.12       1.8   15    51.4 203.   383.   529
 7 A1    H1    II          3.15       1.78  10.9  NA    75.2  256.   294
 8 A1    H1    II          2.97       1.84  15    53.4 204.   387.   528
 9 A1    H1    II          3.1        1.78  13.6  50.8 187.   348.   538
10 A1    H1    II          3.02       1.6   16.3  53.9 250.   430.   582
# … with 110 more rows</code></pre>
</div>
</div>
</section>
<section id="selecionar-linhas-com-base-em-sua-posição" class="level2">
<h2 class="anchored" data-anchor-id="selecionar-linhas-com-base-em-sua-posição">Selecionar linhas com base em sua posição</h2>
<p>A função <a href="https://dplyr.tidyverse.org/articles/grouping.html?q=slice#slice-and-friends"><code>slice()</code></a> permite indexar linhas por seus locais (inteiros). Ele permite selecionar, remover e duplicar linhas. Ele é acompanhado por vários auxiliares para casos de uso comuns:</p>
<ul>
<li><code>slice_head()</code> e <code>slice_tail()</code> selecionam a primeira ou a última linha.</li>
<li><code>slice_sample()</code> seleciona linhas aleatoriamente.</li>
<li><code>slice_min()</code> e <code>slice_max()</code> selecionam linhas com valores mais altos ou mais baixos de uma variável.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selciona as primeiras três linhas</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 10
  AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I           2.45       2.39  16.9  52.1  228.  375.    NA
2 A1    H1    I           2.5        1.43  14.4  50.7  187.  437.   427
3 A1    H1    I           2.69       1.52  16.5  54.7  230.  464.   497</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cinco linhas aleatórias</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
  AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H9    I          NA          1.76  11.9  51.0  125.  423.   295
2 A1    H6    I           2.91       1.47  17.1  57.3  280.  420.   665
3 A2    H2    II          3.06       1.91  15    54.4  198.  501.   396
4 A4    H2    II          2.7        1.52  16.8  50.0  203.  363.   559
5 A1    H13   III         3.06       1.93  14.4  54.0  183.  382.   478</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dois menores valores de MGRA</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">slice_min</span>(<span class="at">n =</span> <span class="dv">2</span>, MGRA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 10
  AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H9    III         2.72       1.54  11    42.8  58.5  295.   198
2 A2    H8    I           1.92       0.63  12.1  39.7  59.5  243.   245</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># maior valor de NGRA</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, NGRA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 10
  AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A4    H8    I           2.65       1.67    18    50  277.  251.   903</code></pre>
</div>
</div>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>
</section>
<section id="ordenar-linhas-com-base-em-seus-valores" class="level2">
<h2 class="anchored" data-anchor-id="ordenar-linhas-com-base-em-seus-valores">Ordenar linhas com base em seus valores</h2>
<p>A função <code>arrange()</code> é utilizada para ordenar as linhas de um tibble (ou data.frames) com base em uma expressão envolvendo suas variáveis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ordena as linhas com base na variável CESP (crescente)</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">arrange</span>(CESP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 780 × 10
   AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H9    I          NA          1.51 0.800  54.0 224.   420.   533
 2 A1    H8    I           2.6        1.4  5.9    52.2 225.   383.   588
 3 A3    H8    III         1.86       0.96 7.5    40.8  73.0  293.   249
 4 A1    H5    II          2.83       1.82 8.2    43.2  94.6  326.   290
 5 A4    H3    II          2.37       1.12 8.2    47.4  96.0  256.   375
 6 A2    H9    I           2.02       1.11 8.7    46.7  61.2  312.   196
 7 A4    H3    II          2.22       1.02 8.9    41.6  77.8  218.   357
 8 A3    H1    III         2.45       1.29 9      51.0  78.9  503.   157
 9 A2    H3    I           2.82       1.87 9.3    47.2 105.   294.   358
10 A1    H2    III         2.86       1.52 9.4    51.2  91.0  225.   405
# … with 770 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ordena as linhas com base na variável CESP (decrescente)</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(CESP))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 780 × 10
   AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A4    H7    III         2.6        1.37  20.4  52    253.  408.   620
 2 A1    H10   I           2.92       1.61  20.3  55.4  283.  441.   641
 3 A3    H1    I           2          1.05  19.9  53.3  253.  444.   570
 4 A1    H10   III         2.29       1.15  19.8  55.9  276.  411.   671
 5 A3    H2    II          2.08       0.93  19.6  52.9  220.  384.   574
 6 A3    H9    III         2.07       1     19.6  48.2  190.  307.   617
 7 A4    H8    III         2.6        1.5   19.5  56.1  264.  402.   657
 8 A2    H6    III         3.18       1.62  19.2  53.0  270.  382.   708
 9 A4    H7    III         2.76       1.54  19.2  54.1  254.  417.   610
10 A1    H9    I           2.69       1.8   19    52.4  226.  428.   529
# … with 770 more rows</code></pre>
</div>
</div>
<p>Ao combinar a função <code>group_by()</code> com <code>arrange()</code> é possível realizar o ordenamento para cada nível de um determinado fator. No exemplo abaixo, a variável <code>APLA</code> é ordenada de maneira crescente para cada híbrido.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">%&gt;%</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(HIB) <span class="sc">%&gt;%</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(MGRA, <span class="at">.by_group =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 780 × 10
# Groups:   HIB [13]
   AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    II          3.15       1.78  10.9  NA    75.2  256.   294
 2 A3    H1    III         2.45       1.29   9    51.0  78.9  503.   157
 3 A3    H1    I           2.13       1.05  11.6  47.0  89.5  300.   298
 4 A3    H1    II          2.18       1.04  13    46.6 103.   351.   293
 5 A3    H1    II          2.08       0.94  12    47.6 103.   334.   309
 6 A3    H1    I           2.07       1.05  13.2  47.9 110.   293.   377
 7 A3    H1    II          1.93       0.93  13    50.0 120.   276.   433
 8 A2    H1    III         3.11       1.9   13    50.8 131.   402.   325
 9 A4    H1    I           2.3        1.25  13.1  50.0 140.   230.   609
10 A3    H1    II          2.39       1.21  14    50.2 144.   331.   435
# … with 770 more rows</code></pre>
</div>
</div>
</section>
<section id="outras-funções-úteis" class="level2">
<h2 class="anchored" data-anchor-id="outras-funções-úteis">Outras funções úteis</h2>
<p>Algumas funções do pacote <code>metan</code> podem ser úteis para trabalhar com dados faltantes. Abaixo, alguns exemplos são mostrados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas com NA</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">select_rows_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Rows(s) with NAs: 1, 7, 19, 124, 125, 257, 258, 259, 318, 319, 549,
550, 551, 552</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 10
   AMB   HIB   REP   APLA_PLANT AIES_PLANT   CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I           2.45       2.39 16.9    52.1 228.   375.    NA
 2 A1    H1    II          3.15       1.78 10.9    NA    75.2  256.   294
 3 A1    H2    I          NA          1.18 16.1    52.3 213.   331.   643
 4 A1    H9    I          NA          1.76 11.9    51.0 125.   423.   295
 5 A1    H9    I          NA          1.51  0.800  54.0 224.   420.   533
 6 A2    H5    I          NA          1.45 16.4    47.5 187.   306.   610
 7 A2    H5    I          NA          1.42 16.9    47.4 192.   382.   504
 8 A2    H5    I          NA          1.55 14      48.3 163.   355.   458
 9 A2    H9    I          NA          0.83 13.2    41.8 114.   218.   521
10 A2    H9    I          NA          1.1  14.2    43.9 119.   186.   640
11 A3    H11   II          2.3        1    NA      45.1  99.8  303.   329
12 A3    H11   II          2.12       1.03 NA      47.8 104.   276.   375
13 A3    H11   III         2.4        1.3  NA      49.6 125.   277.   451
14 A3    H11   III         2.58       1.28 NA      46.8 177.   338.   523</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove linhas com NA</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">remove_rows_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Row(s) 1, 7, 19, 124, 125, 257, 258, 259, 318, 319, 549, 550, 551, 552
with NA values deleted.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 766 × 10
   AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I           2.5        1.43  14.4  50.7  187.  437.   427
 2 A1    H1    I           2.69       1.52  16.5  54.7  230.  464.   497
 3 A1    H1    I           2.8        1.64  16.8  52.0  213.  408.   523
 4 A1    H1    I           2.62       1.55  15.9  51.6  224.  406.   551
 5 A1    H1    II          2.12       1.8   15    51.4  203.  383.   529
 6 A1    H1    II          2.97       1.84  15    53.4  204.  387.   528
 7 A1    H1    II          3.1        1.78  13.6  50.8  187.  348.   538
 8 A1    H1    II          3.02       1.6   16.3  53.9  250.  430.   582
 9 A1    H1    III         2.69       1.52  15.6  49.5  195.  369.   529
10 A1    H1    III         2.6        1.68  14.3  48.9  172.  344.   500
# … with 756 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># substitu NA por 0</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">replace_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 780 × 10
   AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I           2.45       2.39  16.9  52.1 228.   375.     0
 2 A1    H1    I           2.5        1.43  14.4  50.7 187.   437.   427
 3 A1    H1    I           2.69       1.52  16.5  54.7 230.   464.   497
 4 A1    H1    I           2.8        1.64  16.8  52.0 213.   408.   523
 5 A1    H1    I           2.62       1.55  15.9  51.6 224.   406.   551
 6 A1    H1    II          2.12       1.8   15    51.4 203.   383.   529
 7 A1    H1    II          3.15       1.78  10.9   0    75.2  256.   294
 8 A1    H1    II          2.97       1.84  15    53.4 204.   387.   528
 9 A1    H1    II          3.1        1.78  13.6  50.8 187.   348.   538
10 A1    H1    II          3.02       1.6   16.3  53.9 250.   430.   582
# … with 770 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># substitui NA pela média da coluna (cuidado!!!)</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">replace_na</span>(<span class="at">replacement =</span> <span class="st">"colmean"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 780 × 10
   AMB   HIB   REP   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I           2.45       2.39  16.9  52.1 228.   375.  512.
 2 A1    H1    I           2.5        1.43  14.4  50.7 187.   437.  427 
 3 A1    H1    I           2.69       1.52  16.5  54.7 230.   464.  497 
 4 A1    H1    I           2.8        1.64  16.8  52.0 213.   408.  523 
 5 A1    H1    I           2.62       1.55  15.9  51.6 224.   406.  551 
 6 A1    H1    II          2.12       1.8   15    51.4 203.   383.  529 
 7 A1    H1    II          3.15       1.78  10.9  49.5  75.2  256.  294 
 8 A1    H1    II          2.97       1.84  15    53.4 204.   387.  528 
 9 A1    H1    II          3.1        1.78  13.6  50.8 187.   348.  538 
10 A1    H1    II          3.02       1.6   16.3  53.9 250.   430.  582 
# … with 770 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="dplyr-vs-r-base" class="level1">
<h1>dplyr vs R base</h1>
<p>A tabela a seguir mostra uma tradução condensada entre os verbos <code>dplyr</code> e seus equivalentes R base. As seções a seguir descrevem cada operação com mais detalhes. Você aprende mais sobre os verbos dplyr em sua documentação e em For more vignette(“one-table”).</p>
<table class="table">
<thead>
<tr class="header">
<th>dplyr</th>
<th>base</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>arrange(df, x)</code></td>
<td><code>df[order(x), , drop = FALSE]</code></td>
</tr>
<tr class="even">
<td><code>distinct(df, x)</code></td>
<td><code>df[!duplicated(x), , drop = FALSE]</code>, <a href="https://rdrr.io/r/base/unique.html"><code>unique()</code></a></td>
</tr>
<tr class="odd">
<td><code>filter(df, x)</code></td>
<td><code>df[which(x), , drop = FALSE]</code>, <a href="https://rdrr.io/r/base/subset.html"><code>subset()</code></a></td>
</tr>
<tr class="even">
<td><code>mutate(df, z = x + y)</code></td>
<td><code>df$z &lt;- df$x + df$y</code>, <a href="https://rdrr.io/r/base/transform.html"><code>transform()</code></a></td>
</tr>
<tr class="odd">
<td><code>pull(df, 1)</code></td>
<td><code>df[[1]]</code></td>
</tr>
<tr class="even">
<td><code>pull(df, x)</code></td>
<td><code>df$x</code></td>
</tr>
<tr class="odd">
<td><code>rename(df, y = x)</code></td>
<td><code>names(df)[names(df) == "x"] &lt;- "y"</code></td>
</tr>
<tr class="even">
<td><code>relocate(df, y)</code></td>
<td><code>df[union("y", names(df))]</code></td>
</tr>
<tr class="odd">
<td><code>select(df, x, y)</code></td>
<td><code>df[c("x", "y")]</code>, <a href="https://rdrr.io/r/base/subset.html"><code>subset()</code></a></td>
</tr>
<tr class="even">
<td><code>select(df, starts_with("x"))</code></td>
<td><code>df[grepl(names(df), "^x")]</code></td>
</tr>
<tr class="odd">
<td><code>summarise(df, mean(x))</code></td>
<td><code>mean(df$x)</code>, <a href="https://rdrr.io/r/base/tapply.html"><code>tapply()</code></a>, <a href="https://rdrr.io/r/stats/aggregate.html"><code>aggregate()</code></a>, <a href="https://rdrr.io/r/base/by.html"><code>by()</code></a></td>
</tr>
<tr class="even">
<td><code>slice(df, c(1, 2, 5))</code></td>
<td><code>df[c(1, 2, 5), , drop = FALSE]</code></td>
</tr>
</tbody>
</table>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Desafio
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Crie uma variável chamada <code>MGRA_kg</code> qual será o resultado em quilogramas da massa de grãos.</li>
<li>Selecione somente as colunas <code>HIB</code>, <code>AMB</code>, <code>REP</code> e <code>MGRA_Kg</code>.</li>
<li>Selecione somente as cinco linhas com maior valor de <code>MGRA_Kg</code>.</li>
<li>Compute os valores máximos, mínimos e a média destas cinco observações.</li>
</ul>
</div>
</div>
<div align="center"><a href="https://www.free-website-hit-counter.com"><img src="https://www.free-website-hit-counter.com/c.php?d=9&amp;id=141637&amp;s=2" border="0" alt="Free Website Hit Counter"></a><br><small><a href="https://www.free-website-hit-counter.com" title="Free Website Hit Counter">Free website hit counter</a></small></div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../RGV410046/RGV410046_04_MANIPULACAO.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">4. Manipulação de Dados</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../RGV410046/RGV410046_06_MUTACAO.html" class="pagination-link">
        <span class="nav-page-text">6. Mutação</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb89" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "5. Seleção e filtragem"</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="fu"># Diretório</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="in">```{r include = FALSE}</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_knit<span class="sc">$</span><span class="fu">set</span>(<span class="at">root.dir =</span> <span class="st">"E:/Desktop/UFSC/aulas/classes/RGV410046/data"</span>)</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="co"># meu computador (mudar de acordo)</span></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"E:/Desktop/UFSC/aulas/classes/RGV410046/data"</span>)</span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a><span class="fu"># Pacotes e dados</span></span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE, message=FALSE}</span></span>
<span id="cb89-19"><a href="#cb89-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb89-20"><a href="#cb89-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb89-21"><a href="#cb89-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(metan)</span>
<span id="cb89-22"><a href="#cb89-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-23"><a href="#cb89-23" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-24"><a href="#cb89-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-25"><a href="#cb89-25" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introdução</span></span>
<span id="cb89-26"><a href="#cb89-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-27"><a href="#cb89-27" aria-hidden="true" tabindex="-1"></a>Após seus dados estarem carregados no ambiente R, eles provavelmente necessitarão de alguma manimulação antes de serem utilizados em uma determinada análise. Esta manipulação pode envolver operações como exclusão de colunas, ordenamento de linhas com base em valores, criação de covariáveis (que serão resultado de operações com uma ou mais variáveis existentes), dentre muitas outras possibilidades. Felizmente, o pacote <span class="in">`dplyr`</span> permite que esta manimulação seja relativamente fácil, lógica (do ponto de vista de digitação de códigos) e rápida, pois ele integra a linguagem <span class="in">`C++`</span> em suas funções.</span>
<span id="cb89-28"><a href="#cb89-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-29"><a href="#cb89-29" aria-hidden="true" tabindex="-1"></a>O pacote <span class="in">`dplyr`</span> é uma *gramática* de manipulação de dados. Nos rerferimos à *gramática* aqui porque ele fornece funções nomeadas como *verbos* simples, relacionados às tarefas mais comuns de manipulação de dados, para ajudá-lo a traduzir seus pensamentos em código. Este será o pacote utilizado para manipulação dos dados no decorrer deste material. De fato, a maioria dos dados em R podem ser manipulados utilizando os seguintes "verbos".</span>
<span id="cb89-30"><a href="#cb89-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-31"><a href="#cb89-31" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`select()`</span> e <span class="in">`rename()`</span> para selecionar variáveis com base em seus nomes.</span>
<span id="cb89-32"><a href="#cb89-32" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`mutate()`</span> e <span class="in">`transmute()`</span> para adicionar novas variáveis que são funções de variáveis existentes.</span>
<span id="cb89-33"><a href="#cb89-33" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`arrange()`</span> para reordenar as linhas.</span>
<span id="cb89-34"><a href="#cb89-34" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`filter()`</span> para selecionar linhas com base em seus valores.</span>
<span id="cb89-35"><a href="#cb89-35" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`slice_*()`</span> para selecionar linhas com base em sua posição.</span>
<span id="cb89-36"><a href="#cb89-36" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`summarise()`</span> para resumir vários valores para um único valor.</span>
<span id="cb89-37"><a href="#cb89-37" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`group_by()`</span> para agrupar dados com base em níveis de variáveis categóricas.</span>
<span id="cb89-38"><a href="#cb89-38" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`across()`</span> para aplicar a mesma transformação a várias colunas.</span>
<span id="cb89-39"><a href="#cb89-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-40"><a href="#cb89-40" aria-hidden="true" tabindex="-1"></a>Anteriomente mencionamos que a manipulação dos dados com o pacote **dplyr** é lógica do ponto de vista da implementação do código. Isto só é possivel devido a utilização do operador <span class="in">`%&gt;%`</span> (*forward-pipe operator*), importado do pacote `magrittr` (ou com o pipe `|&gt;` disponível do R vesão 4.1 ou superior). Basicamente, este operador capta o argumento resultante de uma função à sua esquerda e passa como *input* à função à sua direita. Considere as seguintes (e simples) operações. Crie um data frame com 100 linhas com as variáveis *x* e *y* contendo valores aleatórios. Adicione uma terceira variáveis (*z*) que será uma função da multiplicação de *x* e *y*, selecione apenas os valores de *z* menores que 10 e extraia a raiz quadrada destes valores. Finalmente, compute a média e armazene no object <span class="in">`mean_sqrt`</span>.</span>
<span id="cb89-41"><a href="#cb89-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-42"><a href="#cb89-42" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Criando o conjunto de dados</span>
<span id="cb89-43"><a href="#cb89-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-46"><a href="#cb89-46" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-47"><a href="#cb89-47" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb89-48"><a href="#cb89-48" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> </span>
<span id="cb89-49"><a href="#cb89-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>),</span>
<span id="cb89-50"><a href="#cb89-50" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="fu">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>))</span>
<span id="cb89-51"><a href="#cb89-51" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-52"><a href="#cb89-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-53"><a href="#cb89-53" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Utilizando as funções bases do R (código massivo)</span>
<span id="cb89-54"><a href="#cb89-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-55"><a href="#cb89-55" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = TRUE, eval = TRUE, message = FALSE, warning = FALSE}</span></span>
<span id="cb89-56"><a href="#cb89-56" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>z <span class="ot">&lt;-</span> data<span class="sc">$</span>x <span class="sc">*</span> data<span class="sc">$</span>y</span>
<span id="cb89-57"><a href="#cb89-57" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">subset</span>(data, z <span class="sc">&lt;</span> <span class="dv">10</span>)</span>
<span id="cb89-58"><a href="#cb89-58" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[, <span class="dv">3</span>]</span>
<span id="cb89-59"><a href="#cb89-59" aria-hidden="true" tabindex="-1"></a>sqr_dat <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(df<span class="sc">$</span>z)</span>
<span id="cb89-60"><a href="#cb89-60" aria-hidden="true" tabindex="-1"></a>mean_sqrt <span class="ot">&lt;-</span> <span class="fu">mean</span>(sqr_dat)</span>
<span id="cb89-61"><a href="#cb89-61" aria-hidden="true" tabindex="-1"></a>mean_sqrt</span>
<span id="cb89-62"><a href="#cb89-62" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-63"><a href="#cb89-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-64"><a href="#cb89-64" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Utilizando as funções bases do R (código mais limpo, envelopando funções)</span>
<span id="cb89-65"><a href="#cb89-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-66"><a href="#cb89-66" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = TRUE, eval = TRUE, message = FALSE, warning = FALSE}</span></span>
<span id="cb89-67"><a href="#cb89-67" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>z <span class="ot">&lt;-</span> data<span class="sc">$</span>x <span class="sc">*</span> data<span class="sc">$</span>y</span>
<span id="cb89-68"><a href="#cb89-68" aria-hidden="true" tabindex="-1"></a>mean_sqrt <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">sqrt</span>(<span class="fu">subset</span>(data, z <span class="sc">&lt;</span> <span class="dv">10</span>)<span class="sc">$</span>z))</span>
<span id="cb89-69"><a href="#cb89-69" aria-hidden="true" tabindex="-1"></a>mean_sqrt</span>
<span id="cb89-70"><a href="#cb89-70" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-71"><a href="#cb89-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-72"><a href="#cb89-72" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Utilizando o operdor <span class="in">`|&gt;`</span></span>
<span id="cb89-73"><a href="#cb89-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-74"><a href="#cb89-74" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = TRUE, eval = TRUE, message = FALSE, warning = FALSE}</span></span>
<span id="cb89-75"><a href="#cb89-75" aria-hidden="true" tabindex="-1"></a>mean_sqrt <span class="ot">&lt;-</span> </span>
<span id="cb89-76"><a href="#cb89-76" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">|&gt;</span> </span>
<span id="cb89-77"><a href="#cb89-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">z =</span> x <span class="sc">*</span> y) <span class="sc">|&gt;</span></span>
<span id="cb89-78"><a href="#cb89-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(z <span class="sc">&lt;</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb89-79"><a href="#cb89-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(z) <span class="sc">|&gt;</span></span>
<span id="cb89-80"><a href="#cb89-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>() <span class="sc">|&gt;</span></span>
<span id="cb89-81"><a href="#cb89-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>()</span>
<span id="cb89-82"><a href="#cb89-82" aria-hidden="true" tabindex="-1"></a>mean_sqrt</span>
<span id="cb89-83"><a href="#cb89-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-84"><a href="#cb89-84" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-85"><a href="#cb89-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-86"><a href="#cb89-86" aria-hidden="true" tabindex="-1"></a><span class="fu"># Trabalhando com colunas</span></span>
<span id="cb89-87"><a href="#cb89-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-88"><a href="#cb89-88" aria-hidden="true" tabindex="-1"></a><span class="fu">## Selecionar colunas</span></span>
<span id="cb89-89"><a href="#cb89-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-90"><a href="#cb89-90" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="al">![](figs/select.png)</span><span class="ot">{fig-alt="Fonte: https://dplyr.tidyverse.org/"}</span><span class="co">](https://dplyr.tidyverse.org/)</span></span>
<span id="cb89-91"><a href="#cb89-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-92"><a href="#cb89-92" aria-hidden="true" tabindex="-1"></a>A função <span class="co">[</span><span class="ot">`select()`</span><span class="co">](https://dplyr.tidyverse.org/reference/select.html)</span> do pacote <span class="in">`dplyr`</span> pode ser usada para selecionar colunas de um conjunto de dados com base em seu nome (por exemplo, <span class="in">`a:f`</span> seleciona todas as colunas de <span class="in">`a`</span> à esquerda a <span class="in">`f`</span> à direita). Você também pode usar funções de predicado como <span class="in">`is.numeric`</span> para selecionar variáveis com base em suas propriedades. As seleções do Tidyverse implementam um dialeto R onde os operadores facilitam a seleção de variáveis:</span>
<span id="cb89-93"><a href="#cb89-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-94"><a href="#cb89-94" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`:`</span> para selecionar um intervalo de variáveis consecutivas.</span>
<span id="cb89-95"><a href="#cb89-95" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`!`</span> para tomar o complemento de um conjunto de variáveis.</span>
<span id="cb89-96"><a href="#cb89-96" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`&amp;`</span> e <span class="in">`|`</span> para selecionar a interseção ou a união de dois conjuntos de variáveis.</span>
<span id="cb89-97"><a href="#cb89-97" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`c()`</span> para combinar seleções.</span>
<span id="cb89-98"><a href="#cb89-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-99"><a href="#cb89-99" aria-hidden="true" tabindex="-1"></a><span class="fu">### Com base em seus nomes</span></span>
<span id="cb89-100"><a href="#cb89-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-103"><a href="#cb89-103" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-104"><a href="#cb89-104" aria-hidden="true" tabindex="-1"></a>maize <span class="ot">&lt;-</span> </span>
<span id="cb89-105"><a href="#cb89-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">import</span>(<span class="st">"examples_data.xlsx"</span>,</span>
<span id="cb89-106"><a href="#cb89-106" aria-hidden="true" tabindex="-1"></a>         <span class="at">sheet =</span> <span class="st">"maize"</span>,</span>
<span id="cb89-107"><a href="#cb89-107" aria-hidden="true" tabindex="-1"></a>         <span class="at">setclass =</span> <span class="st">"tbl"</span>)</span>
<span id="cb89-108"><a href="#cb89-108" aria-hidden="true" tabindex="-1"></a><span class="co"># para evitar uma saída longa</span></span>
<span id="cb89-109"><a href="#cb89-109" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> maize <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb89-110"><a href="#cb89-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-111"><a href="#cb89-111" aria-hidden="true" tabindex="-1"></a><span class="co"># lista de nomes</span></span>
<span id="cb89-112"><a href="#cb89-112" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(AMB, HIB, REP)</span>
<span id="cb89-113"><a href="#cb89-113" aria-hidden="true" tabindex="-1"></a><span class="co"># sequência de nomes</span></span>
<span id="cb89-114"><a href="#cb89-114" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(AMB<span class="sc">:</span>REP)</span>
<span id="cb89-115"><a href="#cb89-115" aria-hidden="true" tabindex="-1"></a><span class="co"># vector de posições</span></span>
<span id="cb89-116"><a href="#cb89-116" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb89-117"><a href="#cb89-117" aria-hidden="true" tabindex="-1"></a><span class="co"># negar a seleção</span></span>
<span id="cb89-118"><a href="#cb89-118" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(AMB<span class="sc">:</span>REP))</span>
<span id="cb89-119"><a href="#cb89-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-120"><a href="#cb89-120" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-121"><a href="#cb89-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-122"><a href="#cb89-122" aria-hidden="true" tabindex="-1"></a><span class="fu">### Com base na classe</span></span>
<span id="cb89-123"><a href="#cb89-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-124"><a href="#cb89-124" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`where()`</span> aplica uma função a todas as variáveis e seleciona aquelas para as quais a função retorna <span class="in">`TRUE`</span>. Assim, podemos selecionar facilmente colunas com base em sua classe</span>
<span id="cb89-125"><a href="#cb89-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-128"><a href="#cb89-128" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-129"><a href="#cb89-129" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona variáveis numéricas</span></span>
<span id="cb89-130"><a href="#cb89-130" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span>
<span id="cb89-131"><a href="#cb89-131" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~!</span><span class="fu">is.numeric</span>(.x)))</span>
<span id="cb89-132"><a href="#cb89-132" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-133"><a href="#cb89-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-134"><a href="#cb89-134" aria-hidden="true" tabindex="-1"></a><span class="fu">### Select helpers</span></span>
<span id="cb89-135"><a href="#cb89-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-136"><a href="#cb89-136" aria-hidden="true" tabindex="-1"></a>Essas funções permitem selecionar variáveis com base em seus nomes.</span>
<span id="cb89-137"><a href="#cb89-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-138"><a href="#cb89-138" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`starts_with()`</span>: começa com um prefixo</span>
<span id="cb89-139"><a href="#cb89-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-142"><a href="#cb89-142" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-143"><a href="#cb89-143" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"C"</span>))</span>
<span id="cb89-144"><a href="#cb89-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-145"><a href="#cb89-145" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-146"><a href="#cb89-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-147"><a href="#cb89-147" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`ends_with()`</span>: termina com um prefixo</span>
<span id="cb89-148"><a href="#cb89-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-151"><a href="#cb89-151" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-152"><a href="#cb89-152" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"S"</span>))</span>
<span id="cb89-153"><a href="#cb89-153" aria-hidden="true" tabindex="-1"></a><span class="co"># variáveis que começam com M e terminam com A</span></span>
<span id="cb89-154"><a href="#cb89-154" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"M"</span>) <span class="sc">&amp;</span> <span class="fu">ends_with</span>(<span class="st">"A"</span>))</span>
<span id="cb89-155"><a href="#cb89-155" aria-hidden="true" tabindex="-1"></a><span class="co"># variáveis que começam com M ou terminam com A</span></span>
<span id="cb89-156"><a href="#cb89-156" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"M"</span>) <span class="sc">|</span> <span class="fu">ends_with</span>(<span class="st">"A"</span>))</span>
<span id="cb89-157"><a href="#cb89-157" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-158"><a href="#cb89-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-159"><a href="#cb89-159" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`contains()`</span>: contém uma string literal</span>
<span id="cb89-160"><a href="#cb89-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-161"><a href="#cb89-161" aria-hidden="true" tabindex="-1"></a>Se as variáveis no conjunto de dados tiverem um padrão com diferenças entre um grupo de variáveis, podemos usar o código a seguir para selecionar variáveis com um padrão.</span>
<span id="cb89-162"><a href="#cb89-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-165"><a href="#cb89-165" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-166"><a href="#cb89-166" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"PLANT"</span>))</span>
<span id="cb89-167"><a href="#cb89-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-168"><a href="#cb89-168" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-169"><a href="#cb89-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-170"><a href="#cb89-170" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`matches()`</span>: corresponde a uma expressão regular</span>
<span id="cb89-171"><a href="#cb89-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-172"><a href="#cb89-172" aria-hidden="true" tabindex="-1"></a>Seleções mais sofisticadas podem ser feitas usando <span class="co">[</span><span class="ot">`matches()`</span><span class="co">](https://tidyselect.r-lib.org/reference/select_helpers.html)</span>. Supondo que gostaríamos de selecionar as variáveis que começam com "A" e tem a segunda letra entre "A" e "M", usaríamos algo como</span>
<span id="cb89-173"><a href="#cb89-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-176"><a href="#cb89-176" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-177"><a href="#cb89-177" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">"^A[A-M]"</span>))</span>
<span id="cb89-178"><a href="#cb89-178" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-179"><a href="#cb89-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-180"><a href="#cb89-180" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`one_of()`</span>: variáveis no vetor de caracteres.</span>
<span id="cb89-181"><a href="#cb89-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-184"><a href="#cb89-184" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-185"><a href="#cb89-185" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"TESTE"</span>, <span class="st">"CESP"</span>, <span class="st">"NGRA"</span>, <span class="st">"NAO_TEM"</span>)</span>
<span id="cb89-186"><a href="#cb89-186" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">one_of</span>(vars))</span>
<span id="cb89-187"><a href="#cb89-187" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-188"><a href="#cb89-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-189"><a href="#cb89-189" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`everything()`</span>: todas as variáveis.</span>
<span id="cb89-190"><a href="#cb89-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-193"><a href="#cb89-193" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-194"><a href="#cb89-194" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">everything</span>())</span>
<span id="cb89-195"><a href="#cb89-195" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-196"><a href="#cb89-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-197"><a href="#cb89-197" aria-hidden="true" tabindex="-1"></a><span class="fu">## Extrair colunas</span></span>
<span id="cb89-198"><a href="#cb89-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-199"><a href="#cb89-199" aria-hidden="true" tabindex="-1"></a>No R base, para extrair colunas de um data frame usamos <span class="in">`$`</span>. A função <span class="co">[</span><span class="ot">`pull()`</span><span class="co">](https://dplyr.tidyverse.org/reference/pull.html)</span> é semelhante a <span class="in">`$`</span>, mas é mais fácil de ser utilizada com pipes. Para seleção, podemos especificar uma variável como:</span>
<span id="cb89-200"><a href="#cb89-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-201"><a href="#cb89-201" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>um nome de variável literal</span>
<span id="cb89-202"><a href="#cb89-202" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>um inteiro positivo, dando a posição contando a partir da esquerda</span>
<span id="cb89-203"><a href="#cb89-203" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>um inteiro negativo, dando a posição contando a partir da direita.</span>
<span id="cb89-204"><a href="#cb89-204" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>O padrão retorna a última coluna (supondo que seja a coluna que você criou mais recentemente).</span>
<span id="cb89-205"><a href="#cb89-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-206"><a href="#cb89-206" aria-hidden="true" tabindex="-1"></a>Note a diferença.</span>
<span id="cb89-207"><a href="#cb89-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-210"><a href="#cb89-210" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-211"><a href="#cb89-211" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>MGRA</span>
<span id="cb89-212"><a href="#cb89-212" aria-hidden="true" tabindex="-1"></a><span class="co"># padrão é a última coluna</span></span>
<span id="cb89-213"><a href="#cb89-213" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">pull</span>()</span>
<span id="cb89-214"><a href="#cb89-214" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar variável com base no nome</span></span>
<span id="cb89-215"><a href="#cb89-215" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">pull</span>(MGRA)</span>
<span id="cb89-216"><a href="#cb89-216" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar variável com base na sua posição</span></span>
<span id="cb89-217"><a href="#cb89-217" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">pull</span>(<span class="dv">5</span>)</span>
<span id="cb89-218"><a href="#cb89-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-219"><a href="#cb89-219" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-220"><a href="#cb89-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-221"><a href="#cb89-221" aria-hidden="true" tabindex="-1"></a><span class="fu">## Realocar colunas</span></span>
<span id="cb89-222"><a href="#cb89-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-223"><a href="#cb89-223" aria-hidden="true" tabindex="-1"></a>Para reordenar colunas em um data frame, podemos utilizar a função <span class="co">[</span><span class="ot">`relocate()`</span><span class="co">](https://dplyr.tidyverse.org/reference/relocate.html)</span> do pacote <span class="in">`dplyr`</span>. Ela altera as posições das colunas, usando a mesma sintaxe que <span class="in">`select()`</span> para facilitar a movimentação de blocos de colunas de uma só vez.</span>
<span id="cb89-224"><a href="#cb89-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-225"><a href="#cb89-225" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb89-226"><a href="#cb89-226" aria-hidden="true" tabindex="-1"></a><span class="fu">relocate</span>(.data, ..., <span class="at">.before =</span> <span class="cn">NULL</span>, <span class="at">.after =</span> <span class="cn">NULL</span>)</span>
<span id="cb89-227"><a href="#cb89-227" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-228"><a href="#cb89-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-229"><a href="#cb89-229" aria-hidden="true" tabindex="-1"></a>Nesta função, as variáveis em ... são movidas para antes de <span class="in">`.before`</span> ou depois de <span class="in">`.after`</span>.</span>
<span id="cb89-230"><a href="#cb89-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-233"><a href="#cb89-233" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-234"><a href="#cb89-234" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">relocate</span>(NGRA, <span class="at">.before =</span> APLA_PLANT)</span>
<span id="cb89-235"><a href="#cb89-235" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">relocate</span>(<span class="fu">contains</span>(<span class="st">"_PLANT"</span>), <span class="at">.after =</span> <span class="fu">last_col</span>())</span>
<span id="cb89-236"><a href="#cb89-236" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">relocate</span>(<span class="fu">where</span>(is.numeric), <span class="at">.before =</span> <span class="fu">where</span>(is.character))</span>
<span id="cb89-237"><a href="#cb89-237" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-238"><a href="#cb89-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-239"><a href="#cb89-239" aria-hidden="true" tabindex="-1"></a><span class="fu"># Trabalhado com linhas</span></span>
<span id="cb89-240"><a href="#cb89-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-241"><a href="#cb89-241" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="al">![Fonte: https://dplyr.tidyverse.org/](figs/filter.png)</span><span class="co">](https://dplyr.tidyverse.org/)</span></span>
<span id="cb89-242"><a href="#cb89-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-243"><a href="#cb89-243" aria-hidden="true" tabindex="-1"></a><span class="fu">## Selecionar linhas com base em seus valores</span></span>
<span id="cb89-244"><a href="#cb89-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-245"><a href="#cb89-245" aria-hidden="true" tabindex="-1"></a>Utilizando a função <span class="co">[</span><span class="ot">`filter()`</span><span class="co">](https://dplyr.tidyverse.org/reference/filter.html)</span> é possivel filtrar as linhas de um conjunto de dados com base no valor de suas variáveis. No primeiro exemplo, selecionaremos as linhas onde o valor da variável MGRA é maior que 280.</span>
<span id="cb89-246"><a href="#cb89-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-247"><a href="#cb89-247" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = TRUE, eval = TRUE, message = FALSE, warning = FALSE}</span></span>
<span id="cb89-248"><a href="#cb89-248" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">%&gt;%</span> </span>
<span id="cb89-249"><a href="#cb89-249" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(MGRA <span class="sc">&gt;</span> <span class="dv">280</span>)</span>
<span id="cb89-250"><a href="#cb89-250" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-251"><a href="#cb89-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-252"><a href="#cb89-252" aria-hidden="true" tabindex="-1"></a>No segundo exemplo, selecionaremos apenas as linhas onde a MGRA é maior que 220 **OU** a APLA é menor que 1.3 **OU** o NGRA é maior que 820.</span>
<span id="cb89-253"><a href="#cb89-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-254"><a href="#cb89-254" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = TRUE, eval = TRUE, message = FALSE, warning = FALSE}</span></span>
<span id="cb89-255"><a href="#cb89-255" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">%&gt;%</span> </span>
<span id="cb89-256"><a href="#cb89-256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(MGRA <span class="sc">&gt;</span> <span class="dv">280</span> <span class="sc">|</span> APLA_PLANT <span class="sc">&lt;</span> <span class="fl">1.3</span> <span class="sc">|</span> NGRA <span class="sc">&gt;</span> <span class="dv">820</span>)</span>
<span id="cb89-257"><a href="#cb89-257" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-258"><a href="#cb89-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-259"><a href="#cb89-259" aria-hidden="true" tabindex="-1"></a>No último exemplo, selecionaremos apenas as linhas onde MGRA é maior que é maior que 220 **E** a APLA é menor que 2.</span>
<span id="cb89-260"><a href="#cb89-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-261"><a href="#cb89-261" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = TRUE, eval = TRUE, message = FALSE, warning = FALSE}</span></span>
<span id="cb89-262"><a href="#cb89-262" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">%&gt;%</span> </span>
<span id="cb89-263"><a href="#cb89-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(MGRA <span class="sc">&gt;</span> <span class="dv">220</span> <span class="sc">&amp;</span> APLA_PLANT <span class="sc">&lt;</span> <span class="dv">2</span>)</span>
<span id="cb89-264"><a href="#cb89-264" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-265"><a href="#cb89-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-266"><a href="#cb89-266" aria-hidden="true" tabindex="-1"></a>Isto é aproximadamente equivalente ao seguinte código R base.</span>
<span id="cb89-267"><a href="#cb89-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-268"><a href="#cb89-268" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = TRUE, eval = FALSE, message = FALSE, warning = FALSE}</span></span>
<span id="cb89-269"><a href="#cb89-269" aria-hidden="true" tabindex="-1"></a>maize[maize<span class="sc">$</span>MGRA <span class="sc">&gt;</span> <span class="dv">220</span> <span class="sc">&amp;</span> maize<span class="sc">$</span>APLA_PLANT <span class="sc">&lt;</span> <span class="dv">2</span>, ]</span>
<span id="cb89-270"><a href="#cb89-270" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-271"><a href="#cb89-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-272"><a href="#cb89-272" aria-hidden="true" tabindex="-1"></a>Você também pode usar <span class="in">`filter()`</span> para remover grupos inteiros. Por exemplo, o código a seguir elimina todas as linhas que contém o híbrido "H1".</span>
<span id="cb89-273"><a href="#cb89-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-276"><a href="#cb89-276" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-277"><a href="#cb89-277" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">filter</span>(HIB <span class="sc">!=</span> <span class="st">"H1"</span>)</span>
<span id="cb89-278"><a href="#cb89-278" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona somente os híbridos H1 e H2</span></span>
<span id="cb89-279"><a href="#cb89-279" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">filter</span>(HIB  <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">"H1"</span>, <span class="st">"H2"</span>))</span>
<span id="cb89-280"><a href="#cb89-280" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-281"><a href="#cb89-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-282"><a href="#cb89-282" aria-hidden="true" tabindex="-1"></a><span class="fu">## Selecionar linhas com base em sua posição</span></span>
<span id="cb89-283"><a href="#cb89-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-284"><a href="#cb89-284" aria-hidden="true" tabindex="-1"></a>A função <span class="co">[</span><span class="ot">`slice()`</span><span class="co">](https://dplyr.tidyverse.org/articles/grouping.html?q=slice#slice-and-friends)</span> permite indexar linhas por seus locais (inteiros). Ele permite selecionar, remover e duplicar linhas. Ele é acompanhado por vários auxiliares para casos de uso comuns:</span>
<span id="cb89-285"><a href="#cb89-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-286"><a href="#cb89-286" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`slice_head()`</span> e <span class="in">`slice_tail()`</span> selecionam a primeira ou a última linha.</span>
<span id="cb89-287"><a href="#cb89-287" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`slice_sample()`</span> seleciona linhas aleatoriamente.</span>
<span id="cb89-288"><a href="#cb89-288" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`slice_min()`</span> e <span class="in">`slice_max()`</span> selecionam linhas com valores mais altos ou mais baixos de uma variável.</span>
<span id="cb89-289"><a href="#cb89-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-292"><a href="#cb89-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-293"><a href="#cb89-293" aria-hidden="true" tabindex="-1"></a><span class="co"># selciona as primeiras três linhas</span></span>
<span id="cb89-294"><a href="#cb89-294" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb89-295"><a href="#cb89-295" aria-hidden="true" tabindex="-1"></a><span class="co"># cinco linhas aleatórias</span></span>
<span id="cb89-296"><a href="#cb89-296" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb89-297"><a href="#cb89-297" aria-hidden="true" tabindex="-1"></a><span class="co"># dois menores valores de MGRA</span></span>
<span id="cb89-298"><a href="#cb89-298" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">slice_min</span>(<span class="at">n =</span> <span class="dv">2</span>, MGRA)</span>
<span id="cb89-299"><a href="#cb89-299" aria-hidden="true" tabindex="-1"></a><span class="co"># maior valor de NGRA</span></span>
<span id="cb89-300"><a href="#cb89-300" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, NGRA)</span>
<span id="cb89-301"><a href="#cb89-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-302"><a href="#cb89-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-303"><a href="#cb89-303" aria-hidden="true" tabindex="-1"></a><span class="fu">## </span></span>
<span id="cb89-304"><a href="#cb89-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-305"><a href="#cb89-305" aria-hidden="true" tabindex="-1"></a><span class="fu">## Ordenar linhas com base em seus valores</span></span>
<span id="cb89-306"><a href="#cb89-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-307"><a href="#cb89-307" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`arrange()`</span> é utilizada para ordenar as linhas de um tibble (ou data.frames) com base em uma expressão envolvendo suas variáveis.</span>
<span id="cb89-308"><a href="#cb89-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-311"><a href="#cb89-311" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-312"><a href="#cb89-312" aria-hidden="true" tabindex="-1"></a><span class="co"># ordena as linhas com base na variável CESP (crescente)</span></span>
<span id="cb89-313"><a href="#cb89-313" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">arrange</span>(CESP)</span>
<span id="cb89-314"><a href="#cb89-314" aria-hidden="true" tabindex="-1"></a><span class="co"># ordena as linhas com base na variável CESP (decrescente)</span></span>
<span id="cb89-315"><a href="#cb89-315" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(CESP))</span>
<span id="cb89-316"><a href="#cb89-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-317"><a href="#cb89-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-318"><a href="#cb89-318" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-319"><a href="#cb89-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-320"><a href="#cb89-320" aria-hidden="true" tabindex="-1"></a>Ao combinar a função <span class="in">`group_by()`</span> com <span class="in">`arrange()`</span> é possível realizar o ordenamento para cada nível de um determinado fator. No exemplo abaixo, a variável <span class="in">`APLA`</span> é ordenada de maneira crescente para cada híbrido.</span>
<span id="cb89-321"><a href="#cb89-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-324"><a href="#cb89-324" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-325"><a href="#cb89-325" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">%&gt;%</span></span>
<span id="cb89-326"><a href="#cb89-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(HIB) <span class="sc">%&gt;%</span></span>
<span id="cb89-327"><a href="#cb89-327" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(MGRA, <span class="at">.by_group =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-328"><a href="#cb89-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-329"><a href="#cb89-329" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-330"><a href="#cb89-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-331"><a href="#cb89-331" aria-hidden="true" tabindex="-1"></a><span class="fu">## Outras funções úteis</span></span>
<span id="cb89-332"><a href="#cb89-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-333"><a href="#cb89-333" aria-hidden="true" tabindex="-1"></a>Algumas funções do pacote <span class="in">`metan`</span> podem ser úteis para trabalhar com dados faltantes. Abaixo, alguns exemplos são mostrados.</span>
<span id="cb89-334"><a href="#cb89-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-337"><a href="#cb89-337" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-338"><a href="#cb89-338" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas com NA</span></span>
<span id="cb89-339"><a href="#cb89-339" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">select_rows_na</span>()</span>
<span id="cb89-340"><a href="#cb89-340" aria-hidden="true" tabindex="-1"></a><span class="co"># remove linhas com NA</span></span>
<span id="cb89-341"><a href="#cb89-341" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">remove_rows_na</span>()</span>
<span id="cb89-342"><a href="#cb89-342" aria-hidden="true" tabindex="-1"></a><span class="co"># substitu NA por 0</span></span>
<span id="cb89-343"><a href="#cb89-343" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">replace_na</span>()</span>
<span id="cb89-344"><a href="#cb89-344" aria-hidden="true" tabindex="-1"></a><span class="co"># substitui NA pela média da coluna (cuidado!!!)</span></span>
<span id="cb89-345"><a href="#cb89-345" aria-hidden="true" tabindex="-1"></a>maize <span class="sc">|&gt;</span> <span class="fu">replace_na</span>(<span class="at">replacement =</span> <span class="st">"colmean"</span>)</span>
<span id="cb89-346"><a href="#cb89-346" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-347"><a href="#cb89-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-348"><a href="#cb89-348" aria-hidden="true" tabindex="-1"></a><span class="fu"># dplyr vs R base</span></span>
<span id="cb89-349"><a href="#cb89-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-350"><a href="#cb89-350" aria-hidden="true" tabindex="-1"></a>A tabela a seguir mostra uma tradução condensada entre os verbos <span class="in">`dplyr`</span> e seus equivalentes R base. As seções a seguir descrevem cada operação com mais detalhes. Você aprende mais sobre os verbos dplyr em sua documentação e em For more vignette("one-table").</span>
<span id="cb89-351"><a href="#cb89-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-352"><a href="#cb89-352" aria-hidden="true" tabindex="-1"></a>| dplyr                          | base                                                                                                                                                              |</span>
<span id="cb89-353"><a href="#cb89-353" aria-hidden="true" tabindex="-1"></a>|----------------|--------------------------------------------------------|</span>
<span id="cb89-354"><a href="#cb89-354" aria-hidden="true" tabindex="-1"></a>| <span class="in">`arrange(df, x)`</span>               | <span class="in">`df[order(x), , drop = FALSE]`</span>                                                                                                                                    |</span>
<span id="cb89-355"><a href="#cb89-355" aria-hidden="true" tabindex="-1"></a>| <span class="in">`distinct(df, x)`</span>              | <span class="in">`df[!duplicated(x), , drop = FALSE]`</span>, <span class="co">[</span><span class="ot">`unique()`</span><span class="co">](https://rdrr.io/r/base/unique.html)</span>                                                                            |</span>
<span id="cb89-356"><a href="#cb89-356" aria-hidden="true" tabindex="-1"></a>| <span class="in">`filter(df, x)`</span>                | <span class="in">`df[which(x), , drop = FALSE]`</span>, <span class="co">[</span><span class="ot">`subset()`</span><span class="co">](https://rdrr.io/r/base/subset.html)</span>                                                                                  |</span>
<span id="cb89-357"><a href="#cb89-357" aria-hidden="true" tabindex="-1"></a>| <span class="in">`mutate(df, z = x + y)`</span>        | <span class="in">`df$z &lt;- df$x + df$y`</span>, <span class="co">[</span><span class="ot">`transform()`</span><span class="co">](https://rdrr.io/r/base/transform.html)</span>                                                                                     |</span>
<span id="cb89-358"><a href="#cb89-358" aria-hidden="true" tabindex="-1"></a>| <span class="in">`pull(df, 1)`</span>                  | <span class="in">`df[[1]]`</span>                                                                                                                                                         |</span>
<span id="cb89-359"><a href="#cb89-359" aria-hidden="true" tabindex="-1"></a>| <span class="in">`pull(df, x)`</span>                  | <span class="in">`df$x`</span>                                                                                                                                                            |</span>
<span id="cb89-360"><a href="#cb89-360" aria-hidden="true" tabindex="-1"></a>| <span class="in">`rename(df, y = x)`</span>            | <span class="in">`names(df)[names(df) == "x"] &lt;- "y"`</span>                                                                                                                              |</span>
<span id="cb89-361"><a href="#cb89-361" aria-hidden="true" tabindex="-1"></a>| <span class="in">`relocate(df, y)`</span>              | <span class="in">`df[union("y", names(df))]`</span>                                                                                                                                       |</span>
<span id="cb89-362"><a href="#cb89-362" aria-hidden="true" tabindex="-1"></a>| <span class="in">`select(df, x, y)`</span>             | <span class="in">`df[c("x", "y")]`</span>, <span class="co">[</span><span class="ot">`subset()`</span><span class="co">](https://rdrr.io/r/base/subset.html)</span>                                                                                               |</span>
<span id="cb89-363"><a href="#cb89-363" aria-hidden="true" tabindex="-1"></a>| <span class="in">`select(df, starts_with("x"))`</span> | <span class="in">`df[grepl(names(df), "^x")]`</span>                                                                                                                                      |</span>
<span id="cb89-364"><a href="#cb89-364" aria-hidden="true" tabindex="-1"></a>| <span class="in">`summarise(df, mean(x))`</span>       | <span class="in">`mean(df$x)`</span>, <span class="co">[</span><span class="ot">`tapply()`</span><span class="co">](https://rdrr.io/r/base/tapply.html)</span>, <span class="co">[</span><span class="ot">`aggregate()`</span><span class="co">](https://rdrr.io/r/stats/aggregate.html)</span>, <span class="co">[</span><span class="ot">`by()`</span><span class="co">](https://rdrr.io/r/base/by.html)</span> |</span>
<span id="cb89-365"><a href="#cb89-365" aria-hidden="true" tabindex="-1"></a>| <span class="in">`slice(df, c(1, 2, 5))`</span>        | <span class="in">`df[c(1, 2, 5), , drop = FALSE]`</span>                                                                                                                                  |</span>
<span id="cb89-366"><a href="#cb89-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-367"><a href="#cb89-367" aria-hidden="true" tabindex="-1"></a>::: callout-important</span>
<span id="cb89-368"><a href="#cb89-368" aria-hidden="true" tabindex="-1"></a><span class="fu">## Desafio</span></span>
<span id="cb89-369"><a href="#cb89-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-370"><a href="#cb89-370" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Crie uma variável chamada <span class="in">`MGRA_kg`</span> qual será o resultado em quilogramas da massa de grãos.</span>
<span id="cb89-371"><a href="#cb89-371" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Selecione somente as colunas <span class="in">`HIB`</span>, <span class="in">`AMB`</span>, <span class="in">`REP`</span> e <span class="in">`MGRA_Kg`</span>.</span>
<span id="cb89-372"><a href="#cb89-372" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Selecione somente as cinco linhas com maior valor de <span class="in">`MGRA_Kg`</span>.</span>
<span id="cb89-373"><a href="#cb89-373" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Compute os valores máximos, mínimos e a média destas cinco observações.</span>
<span id="cb89-374"><a href="#cb89-374" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-375"><a href="#cb89-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-376"><a href="#cb89-376" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb89-377"><a href="#cb89-377" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;div align='center'&gt;&lt;a href='https://www.free-website-hit-counter.com'&gt;&lt;img src='https://www.free-website-hit-counter.com/c.php?d=9&amp;id=141637&amp;s=2' border='0' alt='Free Website Hit Counter'&gt;&lt;/a&gt;&lt;br / &gt;&lt;small&gt;&lt;a href='https://www.free-website-hit-counter.com' title="Free Website Hit Counter"&gt;Free website hit counter&lt;/a&gt;&lt;/small&gt;&lt;/div&gt;</span></span>
<span id="cb89-378"><a href="#cb89-378" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Material de apoio à disciplinas</div>   
    <div class="nav-footer-right">Prof.&nbsp;Dr.&nbsp;Tiago Olivoto FIT/CCA/UFSC</div>
  </div>
</footer>



<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>